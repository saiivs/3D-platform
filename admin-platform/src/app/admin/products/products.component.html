<div class="hp-main-layout-content" style="width: 100%;max-width: 100%;">
  <div class="col hp-flex-none w-auto mt-24 mt-sm-0 myclass">
    <div class="row align-items-center mb-4">
      <div class="w-auto pe-0">
        <ul class="row g-6">
          <li class="col hp-flex-none w-auto">
            Total Models <span class="text-start hp-caption text-black-80 hp-text-color-dark-30"
              id="count">{{totalRecords}}</span>
          </li>
        </ul>
      </div>
    </div>
  </div>
  <div class="row mb-32 gy-32">
    <div class="col-12 col-md-6 col-xl-3">
      <div class="card">
        <div class="card-body">
          <div class="row g-16">
            <div class="col-6 hp-flex-none w-auto">
              <div
                class="avatar-item d-flex align-items-center justify-content-center avatar-lg bg-primary-4 hp-bg-color-dark-primary rounded-circle">
                <i class="hp-text-color-dark-0 ri-2x ri-checkbox-circle-line" style="font-size: 24px;color: green;"></i>
                
              </div>
            </div>

            <div class="col">
              <h3 class="mb-4 mt-8">{{totalCompletedModels}}<span
                  class="hp-badge-text ms-8 text-primary hp-text-color-dark-primary-2">Models</span></h3>
              <p class="hp-p1-body mb-0 text-black-80 hp-text-color-dark-30">Completed</p>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-12 col-md-6 col-xl-3">
      <div class="card">
        <div class="card-body">
          <div class="row g-16">
            <div class="col-6 hp-flex-none w-auto">
              <div
                class="avatar-item d-flex align-items-center justify-content-center avatar-lg bg-primary-4 hp-bg-color-dark-primary rounded-circle">
                <i class="iconly-Light-People text-primary hp-text-color-dark-primary-2" style="font-size: 24px;"></i>
              </div>
            </div>

            <div class="col">
              <h3 class="mb-4 mt-8">{{totalCorrectionModels}}<span
                  class="hp-badge-text ms-8 text-primary hp-text-color-dark-primary-2">Models</span></h3>
              <p class="hp-p1-body mb-0 text-black-80 hp-text-color-dark-30">Correction</p>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-12 col-md-6 col-xl-3">
      <div class="card">
        <div class="card-body">
          <div class="row g-16">
            <div class="col-6 hp-flex-none w-auto">
              <div
                class="avatar-item d-flex align-items-center justify-content-center avatar-lg bg-primary-4 hp-bg-color-dark-primary rounded-circle">
                <i class="iconly-Light-People text-primary hp-text-color-dark-primary-2" style="font-size: 24px;"></i>
              </div>
            </div>

            <div class="col">
              <h3 class="mb-4 mt-8">{{totalNotUploaded}}<span
                  class="hp-badge-text ms-8 text-primary hp-text-color-dark-primary-2">Models</span></h3>
              <p class="hp-p1-body mb-0 text-black-80 hp-text-color-dark-30">Total Yet To Start</p>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-12 col-md-6 col-xl-3">
      <div class="card">
        <div class="card-body">
          <div class="row g-16">
            <div class="col-6 hp-flex-none w-auto">
              <div
                class="avatar-item d-flex align-items-center justify-content-center avatar-lg bg-primary-4 hp-bg-color-dark-primary rounded-circle">
                <i class="hp-text-color-dark-0 ri-2x ri-file-upload-line" style="font-size: 24px;"></i>
                
              </div>
            </div>

            <div class="col">
              <h3 class="mb-4 mt-8">{{totalUploadedModels}}<span
                  class="hp-badge-text ms-8 text-primary hp-text-color-dark-primary-2">Models</span></h3>
              <p class="hp-p1-body mb-0 text-black-80 hp-text-color-dark-30">Total Uploaded</p>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="container">
       <div class="card" style="width: 50%;border-radius: 8px;border: 1px solid #00010c;margin-top: 1rem;">
      <div class="card-body">
        <div class="row">
            <div class="col-6">
                <div class="row align-items-start justify-content-between">
                    <h5 class="mb-24">Monthly Budget</h5>
                </div>
            </div>

        </div>
        <div class="row">
            <div class="col-6">
                <div class="row g-1 justify-content-between hp-bestSellingCategories">
                    <div class="col-12">
                        <div class="row align-items-center justify-content-between">
                            <div class="col hp-flex-none w-auto">
                                <div class="row g-8 align-items-center">
                                    <div class="col hp-flex-none w-auto">
                                        
                                    </div>

                                    <div class="col hp-flex-none w-auto">
                                        <p class="mb-4 text-black-100 hp-text-color-dark-0 hp-badge-text fw-medium">Budget</p>
                                    </div>
                                </div>
                            </div>

                            <div class="col hp-flex-none w-auto">
                                <p class="mb-4 hp-p1-body">{{exactBudget !== null ? '€ ' + exactBudget : '€ 0'}}</p>
                            </div>
                        </div>
                    </div>

                    <div class="col-12">
                        <div class="row align-items-center justify-content-between">
                            <div class="col hp-flex-none w-auto">
                                <div class="row g-8 align-items-center">
                                    <div class="col hp-flex-none w-auto">
                                        
                                    </div>

                                    <div class="col hp-flex-none w-auto">
                                        <p class="mb-4 text-black-100 hp-text-color-dark-0 hp-badge-text fw-medium">Remaining Budget</p>
                                    </div>
                                </div>
                            </div>

                            <div class="col hp-flex-none w-auto">
                                <p class="mb-4 hp-p1-body">€ {{(remainingBudget !== null ? remainingBudget : 0) | number:'.2-2'}}</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-12">
                        <div class="row align-items-center justify-content-between">
                            <div class="col hp-flex-none w-auto">
                                <div class="row g-8 align-items-center">
                                    <div class="col hp-flex-none w-auto">
                                        
                                    </div>

                                    <div class="col hp-flex-none w-auto">
                                        <p class="mb-4 text-black-100 hp-text-color-dark-0 hp-badge-text fw-medium">Total Expense</p>
                                    </div>
                                </div>
                            </div>

                            <div class="col hp-flex-none w-auto">
                                <p class="mb-4 hp-p1-body">€ {{(totalExpense !== null ? totalExpense : 0) | number:'.2-2'}}</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-12">
                        <div class="row align-items-center justify-content-between">
                            <div class="col hp-flex-none w-auto">
                                <div class="row g-8 align-items-center">
                                    <div class="col hp-flex-none w-auto">
                                        
                                    </div>

                                    <div class="col hp-flex-none w-auto">
                                        <p class="mb-4 text-danger fw-medium">{{budgetExceeded}}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
          </div>
            
        
    </div>
    </div>
    
    </div>
   
    <div class="container">
      <div class="row mobDev">
        
        <div class="col-xs-12 col-lg-3">
          <div class="btn-group" style="width: 100%;">

            <button type="button" class="btn btn-default dropdown-toggle" style="background-color: lightgray;"
              data-bs-toggle="dropdown">{{ModelerName}}<span class="caret"></span></button>

            <ul class="dropdown-menu scrollable-menu" role="menu">
              <li *ngFor="let modeler of modelersArr;index as i">
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" [(ngModel)]="modeler.isSelected"
                    (change)="MultiSelectionModeler(i,modeler.rollNo)">
                  <label class="form-check-label">
                    {{modeler.name}}
                  </label>
                </div>
              </li>
            </ul>
          </div>
        </div>
        <div class="col-xs-12 col-lg-3">
          <div class="btn-group" style="width: 100%;">
            <button type="button" class="btn btn-default dropdown-toggle" style="background-color: lightgray;"
              data-bs-toggle="dropdown">{{QAName}}<span class="caret"></span></button>
            <ul class="dropdown-menu scrollable-menu" role="menu">
              <li *ngFor="let person of QATeamArr;index as i">
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" [(ngModel)]="person.isSelected"
                    (change)="MultiSelectionQA(i,person.rollNo)" >
                  <label class="form-check-label" >
                    {{person.name}}
                  </label>
                </div>
              </li>
            </ul>
          </div>
        </div>
        
        <div class="col-xs-12 col-lg-3">
          <div>
            <button class="btn btn-lg btn-primary" (click)="aasignProduct()">
              <span *ngIf="!isLoading">Assign</span>
              <span *ngIf="isLoading" class="spinner-grow spinner-grow-sm me-8" role="status" aria-hidden="true"></span>
                <span *ngIf="isLoading">Assigning...</span> 
            </button>
          </div>
        </div>
        
        <div class="col-lg-3">
          <div class="input-group mb-16 addTagBox">
            <input type="text" [(ngModel)]="tagName" class="form-control" placeholder="Tag Name" aria-label="Tag Name"
              aria-describedby="button-addon2">
            <button class="btn btn-outline-primary text-primary hp-hover-text-color-black-0" (click)="getTagName()"
              type="button" id="button-addon2">Add tag</button>
          </div>
        </div>
      </div>

      <div class="ReqReaBtn">
        <button type="button" class="btn btn-dark" data-bs-toggle="modal" data-bs-target="#varyingModal3" data-bs-whatever="@mdo">Add Requirement</button>
        <button class="btn btn-dark deadlineBtn" (click)="reallocateModel()"><i class="hp-text-color-dark-0 ri-1x ri-repeat-line"></i>
          <span>Reallocate</span></button>
        <button (click)="modelerDeadLine()" class="btn btn-primary deadlineBtn">
          <i class="hp-text-color-dark-0 ri-1x ri-timer-line"></i>
          <span>Set Deadline</span>
      </button>
      </div>
      

     
    </div>
   
    <div class="col-12 col-xl-12" *ngIf="globalReqFlag">
      <div class="card hp-card-1 hp-upgradePlanCardOne">
          <div class="card-body d-flex align-items-center">
              <div class="row flex-grow-1 align-items-center justify-content-between">
                  <div class="col-12">
                      <h5 class="mb-8">Requirements for this list can be edited by simply clicking on the text.</h5>
                      <p class="hp-p1-body mb-0" *ngIf="!editRequirementMode" (click)="enableEditmode()" contenteditable="true">{{globalRequirement}}</p>
                      <textarea name="requirement" class="form-control" *ngIf="editRequirementMode" [(ngModel)]="globalRequirement" [value]="globalRequirement" id=""></textarea>
                  </div>

                  <div class="col hp-flex-none w-auto mt-5" *ngIf="editRequirementMode">
                    <button class="btn btn-sm btn-dark" (click)="editRequirement()">Submit</button>
                    <button class="btn btn-sm btn-dark m-16" (click)="disableEdit()">Canel</button>
                  </div>
              </div>

              <div class="hp-dot-1 bg-black-20 hp-bg-color-dark-90"></div>
              <div class="hp-dot-2 bg-black-20 hp-bg-color-dark-90"></div>
              <div class="hp-dot-3 bg-success-4 hp-bg-color-dark-success"></div>
          </div>
      </div>
  </div>
    <div class="col-12">
      <div class="card">
        <div class="card-body">
          <div class="row justify-content-between">
            <div class="col pe-md-9 pe-md-9 tableHead">
              <h4>{{clientNameForTemp}} - Products</h4>
              <p class="hp-p1-body">*If there are any missing pieces of information in the list, kindly ensure they are added before assigning the products to the QA and modelers.</p>
            </div>
            <ng-template #emptyTable>
              <p class="hp-p1-body emptyTable">
                No data to view. Try adding new client.
              </p>
              <img class="emptyImg" src="assets/myImg/empty-folder.png" alt="" />
            </ng-template>
            <div class="table-responsive col-12 mt-16">
              <table class="table table-bordered text-center">
                <thead>
                  <tr>
                    <th scope="col">
                      <div class="myCheckBox">
                        <input class="form-check-input" matTooltip="{{selectionText}}" matTooltipPosition="above" type="checkbox" [(ngModel)]="masterCheckBox"
                          (change)="checkBoxChange()" id="flexCheckDefault">
                      </div>
                    </th>
                    <th scope="col">No</th>
                    <th scope="col">ID</th>
                    <th scope="col" matTooltip="Additional Infromation" matTooltipPosition="above">Info</th>
                    <th scope="col">Product Name</th>
                    <th scope="col">Product Link</th>
                    <th scope="col">Modeler</th>
                    <th scope="col">QA</th>
                    <th scope="col">Status</th>
                    <th scope="col">Preview</th>
                  </tr>
                </thead>
                <tbody>
                  <tr  *ngFor="
                  let pro of products
                    | paginate
                      : {
                          id: 'listing_pagination',
                          itemsPerPage: 50,
                          currentPage: page,
                          totalItems: totalRecords
                        };
                  let i = index
                " [ngStyle]="{'background': pro?.assigned && !pro?.reallocate ? '#3df7003d' : ''}">
                
                    <ng-container  
                      *ngIf="recieved === ''||(pro.tag.toLowerCase().includes(recieved))||(pro.articleId.toLowerCase().includes(recieved))||(pro.productName.toLowerCase().includes(recieved))">

                      <td *ngIf="!pro.assigned || pro?.reallocate || pro?.additionalInfo;else done"><input class="form-check-input" (change)="toggleAdditionalInfo($event,i)" [(ngModel)]="pro.isSelected"
                          type="checkbox" id="flexCheckDefault"></td>
                      <ng-template #done>
                        <td>
                          <div class="reallocateContainer">
                            <i class="hp-text-color-dark-0 ri-2x ri-checkbox-circle-fill"
                              style="font-size: 1.5em;color: green;"></i>
                          </div>
                        </td>
                      </ng-template>
                      <td scope="row">{{(page - 1) * 50 + i + 1}}</td>
                      <td>
                        <div>
                          <div *ngIf="pro.articleId != ('No data-' +(i+1));else missingID">
                            {{pro.articleId}}
                          </div>
                          <ng-template #missingID>
                            <div>
                              <button type="button" (click)="addMissingInfo('ArticleId',pro.articleId,i)" class="btn btn-text text-primary hp-hover-bg-primary-4 hp-hover-bg-dark-primary" data-bs-toggle="modal" data-bs-target="#varyingModal4" data-bs-whatever="@mdo">Add</button>
                            </div>
                          </ng-template>
                          <div class="dropdown">
                            <a class="dropdown-toggle" href="javascript:;" role="button" id="dropdownMenuLink"
                              data-bs-toggle="dropdown" aria-expanded="false">
                              {{tagNameDrpdown[(page - 1) * 50 + i]}}
                            </a>
                            <ul class="dropdown-menu scrollable-dropdown" aria-labelledby="dropdownMenuLink">
                              <ng-container *ngIf="tagList.length != 0;else notags">
                                <li *ngFor="let tag of tagList;" (click)="addTag(i,tag.tagName,pro.articleId)"><a
                                    class="dropdown-item">{{tag.tagName}}</a></li>
                              </ng-container>
                              <ng-template #notags>
                                <li><a class="dropdown-item text-danger text-center">No tags</a></li>
                              </ng-template>
                            </ul>
                          </div>
                        </div>
                      </td>
                      <td ><button *ngIf="!pro.extraInfo" type="button" class="btn btn-text text-primary hp-hover-bg-primary-4 hp-hover-bg-dark-primary" (click)="addAdditionalInfo(i,pro.articleId)" data-bs-toggle="modal" data-bs-target="#varyingModal" data-bs-whatever="@mdo">Add</button>
                        <button *ngIf="pro.extraInfo" type="button" class="btn btn-sm btn-primary" (click)="viewRequirement(i)" data-bs-toggle="modal" data-bs-target="#varyingModal2" data-bs-whatever="@mdo">View</button>
                       </td>
                       
                      <td>
                        <div>
                          <div class="text-with-dots" matTooltip="{{pro.productName}}" matTooltipPosition="above">
                            {{pro.productName}}</div>
                          <div *ngIf="!pro.Reff;else ReffUrl" (click)="getRefference(i,pro.articleId,pro.productName)">
                            <i matTooltip="Add Refference" matTooltipPosition="below"
                              class="hp-text-color-dark-0 ri-2x ri-upload-cloud-2-fill" style="font-size: 1.3rem;"></i>
                          </div>
                          <ng-template #ReffUrl>
                            <div><a style="font-size: smaller;" target="_blank" href="{{pro.Reff}}">Click</a>
                            </div>
                          </ng-template>
                        </div>
                      </td>
                      <td *ngIf="pro.productLink != ('No data-' + (i+1));else noLink"><a target="_blank" href="{{pro.productLink}}"
                          style="cursor: pointer;">Click</a>
                      </td>
                      <ng-template #noLink>
                        <td><button type="button" (click)="addMissingInfo('Product Link',pro.productLink,i)" class="btn btn-text text-primary hp-hover-bg-primary-4 hp-hover-bg-dark-primary" data-bs-toggle="modal" data-bs-target="#varyingModal4" data-bs-whatever="@mdo">Add</button></td>
                      </ng-template>
                      <td *ngIf="pro.assigned;else notAssigned" style="color: rgb(39, 146, 55);font-weight: bold;">
                        <span *ngIf="pro.price == '';else price">
                          {{pro.assigned}}-<span *ngIf="!pro.priceAdded;else addPrice" (click)="addBtnFn(i)"
                            class="text-primary addPrice">ADD €</span>
                        </span>
                        <ng-template #addPrice>
                          <div class="input-number-input-wrap" *ngIf="pro.priceAdded;else price">
                            <input class="input-number-input" #priceValue type="number" min="1" max="10" value="1">
                            <button class="myAddBtn"
                              (click)="getPrice(priceValue.value,pro.articleId,pro.modRollno,i)">Add</button>
                          </div>
                        </ng-template>
                        <ng-template #price>
                          {{pro.assigned}}-<span (click)="EditPrice(i)" matTooltip="edit price"
                            matTooltipPosition="below" class="text-primary editPrice"><span>€</span>{{pro.price}}</span>
                        </ng-template>
                      </td>
                      <td *ngIf="pro.QaTeam;else notAssigned" style="color: rgb(39, 146, 55);font-weight: bold;">
                        {{pro.QaTeam}}</td>
                      <ng-template #notAssigned>
                        <td class="text-danger">Not Assigned</td>
                      </ng-template>
                      <td *ngIf="pro.productStatus == 'Not Uploaded';else notApproved" class="text-danger">
                        {{pro.productStatus}}</td>
                      <ng-template #notApproved>
                        <td
                          [ngStyle]="{color : pro.productStatus != 'Approved' ? 'rgb(255, 157, 0)' : 'rgb(39, 146, 55)'}"
                          style="font-weight: bold;">{{pro.productStatus}}</td>
                      </ng-template>
                      <td>
                        <button (click)="modalReview(pro.articleId,clientId,pro.version)" class="btn btn-sm btn-outline-primary"
                          *ngIf="pro.productStatus != 'Not Uploaded';else NoData">
                          View
                        </button>
                        <ng-template #NoData>
                          <button class="btn btn-sm btn-danger">
                            <a style="color:white">No Data</a>
                          </button>
                        </ng-template>
                      </td>
                    </ng-container>
                  </tr>
                </tbody>
              </table>
              <div>
                <pagination-controls id="listing_pagination" [maxSize]="6" [directionLinks]="true"
                  (pageChange)="onPageChange($event)"></pagination-controls>
              </div>
            </div>
            <!-- modal for adding additional info -->
            <div class="modal fade" id="varyingModal" tabindex="-1" aria-labelledby="varyingModalLabel" aria-hidden="true">
              <div class="modal-dialog">
                  <div class="modal-content">
                      <div class="modal-header">
                          <h5 class="modal-title" id="varyingModalLabel">Add Requirements</h5>
                          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                      </div>
                      <div class="modal-body">
                          <form>
                              <div class="mb-3">
                                  <label for="message-text" class="col-form-label">Type here:</label>
                                  <textarea class="form-control" [(ngModel)]="requirementTxt" name="b" id="message-text"></textarea>
                              </div>
                          </form>
                      </div>
                      <div class="modal-footer">
                          <button type="button" class="btn btn-text" data-bs-dismiss="modal">Close</button>
                          <button type="button" (click)="submitAdditionalInfo()" data-bs-dismiss="modal" class="btn btn-primary">Add</button>
                      </div>
                  </div>
              </div>
          </div>
          <!-- view the requirement -->
            <div class="modal fade" id="varyingModal2" tabindex="-1" aria-labelledby="varyingModalLabel" aria-hidden="true">
              <div class="modal-dialog">
                  <div class="modal-content">
                      <div class="modal-header">
                          <h5 class="modal-title" id="varyingModalLabel">View and edit</h5>
                          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                      </div>
                      <div class="modal-body">
                          <form>
                              <div class="mb-3">
                                  <label for="message-text" class="col-form-label">Type here:</label>
                                  <textarea class="form-control" [(ngModel)]="requirementTxt" name="a" [value]="requirementTxt" id="message-text"></textarea>
                              </div>
                          </form>
                      </div>
                      <div class="modal-footer">
                          <button type="button" class="btn btn-text" data-bs-dismiss="modal">Close</button>
                          <button type="button" (click)="submitAdditionalInfo()" data-bs-dismiss="modal" class="btn btn-primary">Edit</button>
                      </div>
                  </div>
              </div>
          </div>
          <!-- global requirement section -->
            <div class="modal fade" id="varyingModal3" tabindex="-1" aria-labelledby="varyingModalLabel" aria-hidden="true">
              <div class="modal-dialog">
                  <div class="modal-content">
                      <div class="modal-header">
                          <h5 class="modal-title" id="varyingModalLabel">Please add the specified requirements to this list.</h5>
                          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                      </div>
                      <div class="modal-body">
                          <form>
                              <div class="mb-3">
                                  <label for="message-text" class="col-form-label">Type here:</label>
                                  <textarea class="form-control" [(ngModel)]="globalRequirement" name="c" id="message-text"></textarea>
                              </div>
                          </form>
                      </div>
                      <div class="modal-footer">
                          <button type="button" class="btn btn-text" data-bs-dismiss="modal">Close</button>
                          <button type="button" (click)="AddGlobalRequirement()" data-bs-dismiss="modal" class="btn btn-primary">Add</button>
                      </div>
                  </div>
              </div>
          </div>
          <!-- adding missing information to the list -->
            <div class="modal fade" id="varyingModal4" tabindex="-1" aria-labelledby="varyingModalLabel" aria-hidden="true">
              <div class="modal-dialog">
                  <div class="modal-content">
                      <div class="modal-header">
                          <h5 class="modal-title" id="varyingModalLabel">Complete Your List: Add Missing Information.</h5>
                          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                      </div>
                      <div class="modal-body">
                          <form>
                            <div class="mb-3">
                              <label for="recipient-name" class="col-form-label">{{missingInfoTitle}}:</label>
                              <input type="text" class="form-control" [(ngModel)]="missingInfoUpdateValue" name="d" id="recipient-name">
                          </div>
                          </form>
                      </div>
                      <div class="modal-footer">
                          <button type="button" class="btn btn-text" data-bs-dismiss="modal">Close</button>
                          <button type="button" (click)="updateMissingInfo()" data-bs-dismiss="modal" class="btn btn-primary">Add</button>
                      </div>
                  </div>
              </div>
          </div>
            <div class="col-12 mt-24 hljs-container">
              <pre>
                <code class="html" data-component='table' data-code='overview'></code>
              </pre>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>